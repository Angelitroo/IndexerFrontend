<head>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Open+Sans:wght@400;700&family=Poppins:wght@600&display=swap" rel="stylesheet">
</head>

<ion-content [class.backgroundclaro]="modo" [class.backgroundoscuro]="!modo">
  <div class="top-icons">
    <button>
      <ion-icon name="notifications-outline"></ion-icon>
    </button>
    <button>
      <ion-icon name="person-circle-outline" [routerLink]="'/modificarperfil'"></ion-icon>
    </button>
  </div>

  <div class="branding">
    <img src="assets/indexer.png" alt="Logo" />
    <h1>Ofertas destacadas</h1>
    <p>Explora los productos con descuentos</p>
  </div>

  <div class="searchbar-container">
    <ion-searchbar placeholder="Buscar producto..." class="input-item"></ion-searchbar>
  </div>

  <app-menuizquierda></app-menuizquierda>

  <ng-container *ngFor="let empresa of empresas">
    <h2 class="empresa-titulo">{{ empresa }}</h2>

    <swiper
      [navigation]="true"
      [pagination]="{ clickable: true }"
      [loop]="false"
      [slidesPerView]="5"
      [slidesPerGroup]="1"
      [spaceBetween]="2"
      class="custom-swiper"
    >


    <ng-template
        swiperSlide
        *ngFor="let producto of productos"
      >
        <ion-card class="product-card">
          <div class="heart-icon" (click)="toggleFavorito(producto)">
            <ion-icon [name]="producto.favorito ? 'heart' : 'heart-outline'"></ion-icon>
          </div>


          <img [src]="producto.image" alt="Imagen de {{ producto.title }}" />
          <ion-card-header>
            <ion-card-title>{{ producto.title }}</ion-card-title>
            <ion-badge color="danger" *ngIf="producto.discount">
              {{ producto.discount }} OFF
            </ion-badge>
          </ion-card-header>
          <ion-card-content>
            <div class="price-row">
              <span class="actual-price">€{{ producto.actualPrice.toFixed(2) }}</span>
              <span class="old-price">€{{ producto.oldPrice.toFixed(2) }}</span>
            </div>
            <div class="rating">⭐ {{ producto.rating }}</div>
            <div class="delivery">{{ producto.delivery }}</div>
            <ion-button
              expand="block"
              fill="outline"
              size="small"
              [href]="producto.url"
              target="_blank"
              class="login-button"
            >
              Ver más
            </ion-button>
          </ion-card-content>
        </ion-card>
      </ng-template>
    </swiper>

  </ng-container>

</ion-content>
