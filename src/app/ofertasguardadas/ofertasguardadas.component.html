<ion-content class="background" [class.backgroundclaro]="modo" [class.backgroundoscuro]="!modo">
  <div class="layout">
    <app-menuizquierdaconfig></app-menuizquierdaconfig>

    <div class="formulario">
      <div class="branding">
        <h1>Ofertas Guardadas</h1>
        <p [class.claro]="modo" [class.oscuro]="!modo">Ofertas que no quisiste dejar escapar</p>
      </div>

      <swiper
        [navigation]="true"
        [pagination]="{ clickable: true }"
        [loop]="false"
        [slidesPerView]="slidesPerView"
        [slidesPerGroup]="1"
        [spaceBetween]="1"
        [breakpoints]="swiperBreakpoints"
        class="custom-swiper">
        <ng-template swiperSlide *ngFor="let producto of productos">
          <ion-card class="product-card" [class.cardclaro]="modo" [class.cardoscuro]="!modo">
            <div class="heart-icon" (click)="toggleFavorito(producto)">
              <ion-icon [name]="producto.favorito ? 'heart' : 'heart-outline'"></ion-icon>
            </div>
            <img [src]="producto.image" alt="Imagen de {{ producto.title }}" />
            <ion-card-header>
              <ion-card-title [class.claro]="modo" [class.oscuro]="!modo">{{ producto.title }}</ion-card-title>
              <ion-badge class="descuento"
                *ngIf="producto.discount && producto.oldPrice && producto.oldPrice !== 0 && producto.oldPrice !== producto.actualPrice">
                {{ producto.discount }}
              </ion-badge>
            </ion-card-header>
            <ion-card-content>
              <div class="price-row">
                <span class="actual-price">€{{ producto.actualPrice.toFixed(2) }}</span>
                <span class="old-price" *ngIf="producto.oldPrice && producto.oldPrice !== 0 && producto.oldPrice !== producto.actualPrice">
                  €{{ producto.oldPrice.toFixed(2) }}
                </span>
              </div>
              <div class="rating" [class.claro]="modo" [class.oscuro]="!modo" *ngIf="producto.rating">⭐ {{ producto.rating }}</div>
              <ion-button
                expand="block"
                fill="outline"
                size="small"
                [href]="producto.url"
                target="_blank"
                class="login-button">
                Ver más
              </ion-button>
            </ion-card-content>
          </ion-card>
        </ng-template>
      </swiper>
    </div>
  </div>
</ion-content>
